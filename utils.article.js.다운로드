if(hrdStorageget("hrduuid")==""){hrdStorageset("hrduuid",browseruuid());}

/*  기자구독 */
function jst_artilcereporter(i){
	var reportcnt = $(".editor").data("code");
	if(utils.isMem() == true){
		var reportid = $("#subscribeButtonarticle"+i).data("code");
		var _data_ = { "PI_CHANNEL_TYPE":"W","PI_CHANNEL_ID" : reportid, "MSPMemInfo":getCookie('MSPMemInfo')};
		if(!reportid){ return false;}
		var data = HrdMemajax('/reporter.info',_data_);
		if ( 0 == parseInt(data._DATA[0]['tcnt'],10)){
			var tmp = HrdMemajax('/reporter.insert',_data_);
			$("#subscribeButtonarticle"+i).attr('class','subscribe');
			$("#subscribeButtonarticle"+i).html('<span>구독중</span>');
			alert('구독 신청되었습니다.');
		}else{
			var tmp = HrdMemajax('/reporter.delete',_data_);
			$("#subscribeButtonarticle"+i).attr('class','no_subscribe');
			$("#subscribeButtonarticle"+i).html('<span>구독 + </span>');
			alert('구독이 취소 되었습니다.');
		}
	}else{
		if(confirm("구독을 위해서는 로그인을 하셔야 합니다.\n로그인 하시겠습니까?")){
			self.location.replace(_login_url_);
		}else{
			return false;
		}
	}
}

/*  book mark */
$(document).ready(function() {
	$(".btn_bookmark").click(function () {
		var _data_ = { "artId" : hrdStorageget('hrdartid'),"mediaCode" : "01",  "MSPMemInfo":getCookie('MSPMemInfo')};
		if(utils.isMem() == true){
			const isBookmarked = $(this).toggleClass('bookmark_on').hasClass('bookmark_on');
			if(isBookmarked == true){
				HrdMemajax('/my.scrap.insert',_data_);
			}else{
				Hrdajax('/my.scrap.delete',_data_);
			}
			const toastText = isBookmarked ? '북마크 되었습니다.<br>보관함에서 확인해주세요.' : '북마크가 해제되었습니다.';
			$(".toast_bookmark_text").html(toastText);
			$(".toast_pop_bookmark").fadeIn().delay(1200).fadeOut();
		}else{
			if(confirm("북마크를 위해서는 로그인을 하셔야 합니다.\n로그인 하시겠습니까?")){
			  self.location.replace(_login_url_);
			}else{
			  return false;
			}
		}
	});
	$(".btn_clip").click(function () {
		$(".toast_pop").fadeIn().delay(1200).fadeOut();
	});
});

/* 폰트 크기 */
function jst_fontsize(n){
	var fontsize = $('.article-view p').css('fontSize').replace('px','');
	var fontpx = 14 + ( 2 * parseInt(n,10));
	$('.article-view p').css('fontSize', fontpx+'px');
}
function jst_mfontsize(n){
	var fontsize = $('.view_editor p').css('fontSize').replace('px','');
	var fontpx = 14 + ( 2 * parseInt(n,10));
	$('.view_editor p').css('fontSize', fontpx+'px');
}


/*  공감 */
// 기사에 대한 전체 공감
function jst_sympathyview(){
	var _data_ = { "artId" : hrdStorageget('hrdartid'), "MSPMemInfo":getCookie('MSPMemInfo')};
	var data = Hrdajax('/my.sympathy.info',_data_);
	var _row_ = data._DATA;
	if(_row_ == undefined ){
	}else{
		var symthy  = 'LIKE,SAD,ANGRY,RECOM';
		var arr = symthy.split(',');
		var len = _row_.length;
		for(i=0;i<len;i++){
			var _share_type_ = _row_[i]['SHARE_TYPE'];
			var _share_cnt_	= _row_[i]['cnt'];
			for(j=0;j<arr.length;j++){
				if( _share_type_ == arr[j]){
					$("#sympathy"+arr[j]+"cnt").html(_share_cnt_);
					if(_share_type_ == 'LIKE' || _share_type_ == 'ANGRY' ){
						$("#sympathytop"+arr[j]+"cnt").html(_share_cnt_);
					}
				}
			}

		}
	}
}
// 기사에 내가 체크한 공감
function jst_sympatmyview(){
	var _data_ = { "artId" : hrdStorageget('hrdartid'), "MSPMemInfo":getCookie('MSPMemInfo')};
	var data = HrdMemajax('/my.sympathy.meminfo',_data_);
	var _row_= data._DATA;
	if(_row_ == undefined ){
	}else{
		var symthy  = 'LIKE,SAD,ANGRY,RECOM'; var arr = symthy.split(',');var len = _row_.length;
		for(j=0;j<arr.length;j++){
			var _check_ = '0';
			for(i=0;i<len;i++){
				var _share_type_ = _row_[i]['SHARE_TYPE'];
				if( _share_type_ == arr[j]){ _check_ = 1; break;}
			}
			if(_check_ == 1){
				$("#emoji"+arr[j]).addClass("on");
			}else{
				$("#emoji"+arr[j]).removeClass("on");
			}
		}
	}
}

function jst_sympathy(artid,tyz){
	if(utils.isMem() == true){
		// 등록
		var _data_ = {"artId":hrdStorageget('hrdartid'),"PI_SHR_TYPE":tyz,"PI_REG_IP":"127.0.01", "PI_SHR_DEV":"P","PI_PC_ID":hrdStorageget('hrduuid'), "MSPMemInfo":getCookie('MSPMemInfo')};
		var data = HrdMemajax('/my.sympathy.insert',_data_);

		// 전체 결과 받아 오기
		jst_sympathyview();
		// 내 결과 표시하기
		jst_sympatmyview();


	}else{
		if(confirm("로그인을 하셔야 사용 가능합니다.\n로그인 하시겠습니까?")){
			self.location.replace(_login_url_);
		}else{
			return false;
		}
	}
}




$(document).ready(function() {
	if(utils.isMem() == true){
		//bookmark
		var _data_ = { "artId" : hrdStorageget('hrdartid'), "MSPMemInfo":getCookie('MSPMemInfo')};
		var data = Hrdajax('/my.scrap.check',_data_);
		if(data._DATA[0]==true){$(".btn_bookmark").toggleClass('bookmark_on').hasClass('bookmark_on');}
		// /* 기자 구독 start */
		if($(".editor").data("code")  ){
			var reportcnt = $(".editor").data("code");
			for(i=1;i<=reportcnt;i++){
				var reportid = $("#subscribeButtonarticle"+i).data("code");
				var _data_ = { "PI_CHANNEL_TYPE":"W","PI_CHANNEL_ID" : reportid};
				if(reportid){
					var data = HrdMemajax('/reporter.info',_data_);
					if ( 0< data._DATA[0]['tcnt']){
						$("#subscribeButtonarticle"+i).attr('class','subscribe');
						$("#subscribeButtonarticle"+i).html('<span>구독중</span>');
					}
				}
			}
		}
		// 공감
		jst_sympatmyview();
	}
});


function articleblind(lang){
	var _html_ = '';
	if(lang == 'ko') {
		_html_ += `
			<div class="pop_join">
				<div class="pop_join_title">계속해서 열람 하시려면</div>
					<div class="pop_join_title pop_join_title_t2">로그인 후 이용해 주세요.</div>
					<a href="`+LOGIN_URL+`?sru=`+encodeURI(window.document.URL)+`&lang=ko" class="pop_join_btn">로그인</a>
					<div class="pop_join_sub">헤럴드 회원이 되시면 HeralDeep 콘텐츠, 구독&알림 서비스 등<br>다양한 서비스를 이용하실 수 있습니다.</div>
					<a href="`+LOGIN_URL+`html/join/index.php?sru=`+encodeURI(window.document.URL)+`&lang=ko" class="pop_join_btn_2">
						<span>회원가입</span>
						<i>
						<svg viewBox="0 0 15 15" fill="none">
						<path d="M5.625 3.75L9.375 7.5L5.625 11.25" stroke="white"/>
						</svg>
						</i>
					</a>
					<div class="language">
					<svg viewBox="0 0 15 15" class="language_earth">
					<path d="M7.54,0.29C7.53,0.29,7.53,0.29,7.54,0.29L7.54,0.29c-0.02,0-0.03,0-0.04,0c-3.97,0-7.21,3.23-7.21,7.21
					c0,3.96,3.21,7.19,7.17,7.21c0,0,0.01,0,0.01,0l0,0c0.01,0,0.02,0,0.03,0c3.97,0,7.21-3.23,7.21-7.21
					C14.71,3.54,11.49,0.31,7.54,0.29z M13.42,5.06H11.7c-0.33-1.66-0.98-2.74-1.68-3.45C11.56,2.27,12.78,3.51,13.42,5.06z M13.91,7.5
					c0,0.57-0.08,1.12-0.22,1.64h-1.87c0.06-0.51,0.11-1.04,0.11-1.64c0-0.6-0.04-1.14-0.11-1.64h1.87C13.83,6.38,13.91,6.93,13.91,7.5z
					M1.09,7.5c0-0.57,0.08-1.12,0.22-1.64h1.87C3.12,6.36,3.07,6.9,3.07,7.5c0,0.6,0.04,1.14,0.11,1.64H1.31
					C1.17,8.62,1.09,8.07,1.09,7.5z M3.87,7.5c0-0.61,0.04-1.14,0.11-1.64H7.1v3.28H3.98C3.91,8.64,3.87,8.11,3.87,7.5z M10.89,5.06H7.9
					V1.18C8.68,1.41,10.28,2.23,10.89,5.06z M7.1,1.2v3.86H4.12C4.74,2.33,6.32,1.46,7.1,1.2z M7.1,9.94v3.88
					c-0.78-0.23-2.38-1.05-2.99-3.88H7.1z M7.9,13.8V9.94h2.98C10.26,12.67,8.68,13.54,7.9,13.8z M7.9,9.14V5.86h3.12
					c0.06,0.5,0.11,1.03,0.11,1.64c0,0.61-0.04,1.14-0.11,1.64H7.9z M5.08,1.57c-0.73,0.71-1.42,1.8-1.77,3.49H1.58
					C2.23,3.48,3.5,2.22,5.08,1.57z M1.58,9.94H3.3c0.33,1.66,0.98,2.74,1.68,3.45C3.44,12.73,2.22,11.49,1.58,9.94z M9.92,13.43
					c0.73-0.71,1.42-1.8,1.77-3.49h1.73C12.77,11.52,11.5,12.78,9.92,13.43z"></path>
					</svg>
					<div class="language_select">
					<select name="chg_lng" id="chg_lng" onchange="articleblind(this.value);">
						<option value="ko" selected>한국어</option>
						<option value="en">English</option>
					</select>
					<svg viewBox="0 0 4 4">
					<polygon points="0.17,0.59 3.83,0.59 2,3.41 "></polygon>
					</svg>
					</div>
				</div>
			</div>
		`;
	}else{
		_html_ += `
			<div class="pop_join">
				<div class="pop_join_title">Log in to read more.</div>
					<a href="`+LOGIN_URL+`?sru=`+encodeURI(window.document.URL)+`&lang=en" class="pop_join_btn">Login</a>
					<div class="pop_join_sub">Log in to access more articles, newsletters and<br>other exclusive content and services.</div>
					<a href="`+LOGIN_URL+`html/join/index.php?sru=`+encodeURI(window.document.URL)+`&lang=en" class="pop_join_btn_2">
						<span>Membership</span>
						<i>
						<svg viewBox="0 0 15 15" fill="none">
						<path d="M5.625 3.75L9.375 7.5L5.625 11.25" stroke="white"/>
						</svg>
						</i>
					</a>
					<div class="language">
					<svg viewBox="0 0 15 15" class="language_earth">
					<path d="M7.54,0.29C7.53,0.29,7.53,0.29,7.54,0.29L7.54,0.29c-0.02,0-0.03,0-0.04,0c-3.97,0-7.21,3.23-7.21,7.21
					c0,3.96,3.21,7.19,7.17,7.21c0,0,0.01,0,0.01,0l0,0c0.01,0,0.02,0,0.03,0c3.97,0,7.21-3.23,7.21-7.21
					C14.71,3.54,11.49,0.31,7.54,0.29z M13.42,5.06H11.7c-0.33-1.66-0.98-2.74-1.68-3.45C11.56,2.27,12.78,3.51,13.42,5.06z M13.91,7.5
					c0,0.57-0.08,1.12-0.22,1.64h-1.87c0.06-0.51,0.11-1.04,0.11-1.64c0-0.6-0.04-1.14-0.11-1.64h1.87C13.83,6.38,13.91,6.93,13.91,7.5z
					M1.09,7.5c0-0.57,0.08-1.12,0.22-1.64h1.87C3.12,6.36,3.07,6.9,3.07,7.5c0,0.6,0.04,1.14,0.11,1.64H1.31
					C1.17,8.62,1.09,8.07,1.09,7.5z M3.87,7.5c0-0.61,0.04-1.14,0.11-1.64H7.1v3.28H3.98C3.91,8.64,3.87,8.11,3.87,7.5z M10.89,5.06H7.9
					V1.18C8.68,1.41,10.28,2.23,10.89,5.06z M7.1,1.2v3.86H4.12C4.74,2.33,6.32,1.46,7.1,1.2z M7.1,9.94v3.88
					c-0.78-0.23-2.38-1.05-2.99-3.88H7.1z M7.9,13.8V9.94h2.98C10.26,12.67,8.68,13.54,7.9,13.8z M7.9,9.14V5.86h3.12
					c0.06,0.5,0.11,1.03,0.11,1.64c0,0.61-0.04,1.14-0.11,1.64H7.9z M5.08,1.57c-0.73,0.71-1.42,1.8-1.77,3.49H1.58
					C2.23,3.48,3.5,2.22,5.08,1.57z M1.58,9.94H3.3c0.33,1.66,0.98,2.74,1.68,3.45C3.44,12.73,2.22,11.49,1.58,9.94z M9.92,13.43
					c0.73-0.71,1.42-1.8,1.77-3.49h1.73C12.77,11.52,11.5,12.78,9.92,13.43z"></path>
					</svg>
					<div class="language_select">
					<select name="chg_lng" id="chg_lng" onchange="articleblind(this.value);">
						<option value="ko">한국어</option>
						<option value="en" selected>English</option>
					</select>
					<svg viewBox="0 0 4 4">
					<polygon points="0.17,0.59 3.83,0.59 2,3.41 "></polygon>
					</svg>
					</div>
				</div>
			</div>
		`;
	}
	$("#articleviewlayer").html(_html_);
}

function articleblindmobile(lang){
	var _html_ = '';
	if(lang == 'ko') {
		_html_ = `
			<div class="pop_join">
				<div class="pop_join_title pop_join_title_t1">계속해서 열람 하시려면</div>
				<div class="pop_join_title pop_join_title_t2">로그인 후 이용해 주세요.</div>
				<a href="`+LOGIN_URL+`?sru=`+encodeURI(window.document.URL)+`&lang=ko" class="pop_join_btn">로그인</a>
				<div class="pop_join_sub">헤럴드 회원이 되시면 HeralDeep 콘텐츠, 구독&알림 서비스 등 다양한 서비스를 이용하실 수 있습니다.</div>
				<a href="`+LOGIN_URL+`html/join/index.php?sru=`+encodeURI(window.document.URL)+`&lang=ko" class="pop_join_btn_2">회원가입</a>
				<div class="language">
						<div class="language_select">
								<select name="chg_lng" id="chg_lng" onchange="articleblindmobile(this.value);">
										<option value="ko" selected>한국어</option>
										<option value="en">English</option>
								</select>
								<svg viewBox="0 0 4 4">
										<polygon points="0.17,0.59 3.83,0.59 2,3.41 "></polygon>
								</svg>
						</div>
				</div>
			</div>
		`;
	}else{
		_html_ += `
			<div class="pop_join">
            <div class="pop_join_title pop_join_title_t2">Log in to read more.</div>
            <a href="`+LOGIN_URL+`?sru=`+encodeURI(window.document.URL)+`&lang=en" class="pop_join_btn">Login</a>
            <div class="pop_join_sub">Log in to access more articles, newsletters and other exclusive content and services.</div>
            <a href="`+LOGIN_URL+`html/join/index.php?sru=`+encodeURI(window.document.URL)+`&lang=en" class="pop_join_btn_2">Membership</a>
            <div class="language">
                <div class="language_select">
                    <select name="chg_lng" id="chg_lng" onchange="articleblindmobile(this.value);">
                        <option value="ko">한국어</option>
                        <option value="en" selected>English</option>
                    </select>
                    <svg viewBox="0 0 4 4">
                        <polygon points="0.17,0.59 3.83,0.59 2,3.41 "></polygon>
                    </svg>
                </div>
            </div>
        </div>
		`;
	}
	$("#articleviewlayer").html(_html_);
}

function outblack(){
	return "";
}
// 기사 가리기
$(document).ready(function() {
	var _c_ = hrdStorageget("hrdartid");
	var _a_ = hrdStorageget("hrdartidfst");
	var _t_ = hrdStorageget("hrdarttyz");
	var _l_ = hrdStorageget("hrdartlang"); // language type

	if(_t_ == 'F') {

	}else{
		if(utils.isMem() == true){
			//console.log('--');
		}else{
			if( _c_ != _a_){
				if(("#articleviewlayer").length>0){
					$("#articleText").css('overflow','hidden');
					if(hrdStorageget("hrdartdve")=='P'){
						$("#articleText").css('height',"2000px");
						if(_l_ == 'en'){
							articleblind('en');
						}else{
							articleblind('ko');
						}
					}else{
						$("#articleText").css('height',"1800px");
						if(_l_ == 'en') {
							articleblindmobile('en');
						}else{
							articleblindmobile('ko');
						}
					}
				}
			}
		}
	}
});